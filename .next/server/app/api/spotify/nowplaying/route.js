"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/spotify/nowplaying/route";
exports.ids = ["app/api/spotify/nowplaying/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ashlyn_Downloads_ash_portfolio_full_app_api_spotify_nowplaying_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/spotify/nowplaying/route.ts */ \"(rsc)/./app/api/spotify/nowplaying/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/spotify/nowplaying/route\",\n        pathname: \"/api/spotify/nowplaying\",\n        filename: \"route\",\n        bundlePath: \"app/api/spotify/nowplaying/route\"\n    },\n    resolvedPagePath: \"/Users/ashlyn/Downloads/ash-portfolio-full/app/api/spotify/nowplaying/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ashlyn_Downloads_ash_portfolio_full_app_api_spotify_nowplaying_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/spotify/nowplaying/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzcG90aWZ5JTJGbm93cGxheWluZyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3BvdGlmeSUyRm5vd3BsYXlpbmclMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzcG90aWZ5JTJGbm93cGxheWluZyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFzaGx5biUyRkRvd25sb2FkcyUyRmFzaC1wb3J0Zm9saW8tZnVsbCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhc2hseW4lMkZEb3dubG9hZHMlMkZhc2gtcG9ydGZvbGlvLWZ1bGwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXNoLXBvcnRmb2xpby1mdWxsLz9hYTkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hc2hseW4vRG93bmxvYWRzL2FzaC1wb3J0Zm9saW8tZnVsbC9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3BvdGlmeS9ub3dwbGF5aW5nL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3BvdGlmeS9ub3dwbGF5aW5nXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zcG90aWZ5L25vd3BsYXlpbmcvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYXNobHluL0Rvd25sb2Fkcy9hc2gtcG9ydGZvbGlvLWZ1bGwvYXBwL2FwaS9zcG90aWZ5L25vd3BsYXlpbmcvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/spotify/nowplaying/route.ts":
/*!*********************************************!*\
  !*** ./app/api/spotify/nowplaying/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_spotify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/spotify */ \"(rsc)/./lib/spotify.ts\");\n\n\nasync function GET() {\n    try {\n        const token = await (0,_lib_spotify__WEBPACK_IMPORTED_MODULE_1__.ensureAccessToken)();\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                playing: false,\n                error: \"not_authed\"\n            }, {\n                status: 200\n            });\n        }\n        const data = await (0,_lib_spotify__WEBPACK_IMPORTED_MODULE_1__.getNowPlaying)(token);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: String(e?.message ?? e)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDc0I7QUFFMUQsZUFBZUc7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFFBQVEsTUFBTUgsK0RBQWlCQTtRQUNyQyxJQUFJLENBQUNHLE9BQU87WUFDVixPQUFPSixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQWEsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2xGO1FBQ0EsTUFBTUMsT0FBTyxNQUFNUCwyREFBYUEsQ0FBQ0U7UUFDakMsT0FBT0oscURBQVlBLENBQUNLLElBQUksQ0FBQ0ksTUFBTTtZQUFFRCxRQUFRO1FBQUk7SUFDL0MsRUFBRSxPQUFPRSxHQUFRO1FBQ2YsT0FBT1YscURBQVlBLENBQUNLLElBQUksQ0FBQztZQUFFRSxPQUFPSSxPQUFPRCxHQUFHRSxXQUFXRjtRQUFHLEdBQUc7WUFBRUYsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc2gtcG9ydGZvbGlvLWZ1bGwvLi9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50cz9iMDExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGVuc3VyZUFjY2Vzc1Rva2VuLCBnZXROb3dQbGF5aW5nIH0gZnJvbSAnQC9saWIvc3BvdGlmeSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBlbnN1cmVBY2Nlc3NUb2tlbigpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHBsYXlpbmc6IGZhbHNlLCBlcnJvcjogJ25vdF9hdXRoZWQnIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXROb3dQbGF5aW5nKHRva2VuKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFN0cmluZyhlPy5tZXNzYWdlID8/IGUpIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJlbnN1cmVBY2Nlc3NUb2tlbiIsImdldE5vd1BsYXlpbmciLCJHRVQiLCJ0b2tlbiIsImpzb24iLCJwbGF5aW5nIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiZSIsIlN0cmluZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/spotify/nowplaying/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/spotify.ts":
/*!************************!*\
  !*** ./lib/spotify.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   COOKIE_ACCESS: () => (/* binding */ COOKIE_ACCESS),\n/* harmony export */   COOKIE_EXP: () => (/* binding */ COOKIE_EXP),\n/* harmony export */   COOKIE_REFRESH: () => (/* binding */ COOKIE_REFRESH),\n/* harmony export */   applyTokensToResponse: () => (/* binding */ applyTokensToResponse),\n/* harmony export */   buildAuthorizeURL: () => (/* binding */ buildAuthorizeURL),\n/* harmony export */   clearTokens: () => (/* binding */ clearTokens),\n/* harmony export */   ensureAccessToken: () => (/* binding */ ensureAccessToken),\n/* harmony export */   exchangeCodeForTokens: () => (/* binding */ exchangeCodeForTokens),\n/* harmony export */   getNowPlaying: () => (/* binding */ getNowPlaying),\n/* harmony export */   getRefreshToken: () => (/* binding */ getRefreshToken),\n/* harmony export */   refreshAccessToken: () => (/* binding */ refreshAccessToken),\n/* harmony export */   tokenExpired: () => (/* binding */ tokenExpired)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\nconst CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;\nconst CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;\nconst FALLBACK_REDIRECT = process.env.SPOTIFY_REDIRECT_URI || \"\"; // fallback only\nconst REDIRECT_URI = process.env.SPOTIFY_REDIRECT_URI; // must match on Spotify dashboard\nconst IS_PROD = \"development\" === \"production\";\nconst COOKIE_DOMAIN = process.env.COOKIE_DOMAIN || undefined;\nconst PREFIX = process.env.SPOTIFY_COOKIE_PREFIX ?? \"sp\";\nconst COOKIE_REFRESH = `${PREFIX}_refresh`;\nconst COOKIE_ACCESS = `${PREFIX}_access`;\nconst COOKIE_EXP = `${PREFIX}_exp`;\nfunction b64(x) {\n    return Buffer.from(x).toString(\"base64\");\n}\nfunction getCookie(name) {\n    return (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(name)?.value;\n}\n/** Build the user consent URL */ function buildAuthorizeURL(redirectUri) {\n    const scopes = [\n        \"user-read-currently-playing\",\n        \"user-read-playback-state\"\n    ].join(\" \");\n    const finalRedirect = redirectUri || FALLBACK_REDIRECT;\n    if (!finalRedirect) throw new Error(\"Missing redirect URI\");\n    const url = new URL(\"https://accounts.spotify.com/authorize\");\n    url.searchParams.set(\"client_id\", CLIENT_ID);\n    url.searchParams.set(\"response_type\", \"code\");\n    url.searchParams.set(\"redirect_uri\", finalRedirect);\n    url.searchParams.set(\"scope\", scopes);\n    return url.toString();\n}\n/** Set cookies on the *response* we return (safe for prod) */ function applyTokensToResponse(res, { access_token, refresh_token, expires_in }) {\n    const now = Math.floor(Date.now() / 1000);\n    const exp = now + Math.max(1, Math.floor(expires_in * 0.9));\n    const base = {\n        httpOnly: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        secure: IS_PROD,\n        ...COOKIE_DOMAIN ? {\n            domain: COOKIE_DOMAIN\n        } : {}\n    };\n    res.cookies.set(COOKIE_ACCESS, access_token, base);\n    res.cookies.set(COOKIE_EXP, String(exp), base);\n    if (refresh_token) {\n        res.cookies.set(COOKIE_REFRESH, refresh_token, {\n            ...base,\n            maxAge: 60 * 60 * 24 * 30\n        });\n    }\n}\nfunction clearTokens(res) {\n    res.cookies.set(COOKIE_ACCESS, \"\", {\n        path: \"/\",\n        maxAge: 0\n    });\n    res.cookies.set(COOKIE_REFRESH, \"\", {\n        path: \"/\",\n        maxAge: 0\n    });\n    res.cookies.set(COOKIE_EXP, \"\", {\n        path: \"/\",\n        maxAge: 0\n    });\n}\nfunction getRefreshToken() {\n    return getCookie(COOKIE_REFRESH) || \"\";\n}\nfunction tokenExpired() {\n    const exp = Number(getCookie(COOKIE_EXP) || 0);\n    const now = Math.floor(Date.now() / 1000);\n    return !exp || now >= exp;\n}\nasync function exchangeCodeForTokens(code, redirectUri) {\n    const finalRedirect = redirectUri || FALLBACK_REDIRECT;\n    if (!finalRedirect) throw new Error(\"Missing redirect URI\");\n    const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: finalRedirect\n    });\n    const res = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Basic ${Buffer.from(`${CLIENT_ID}:${CLIENT_SECRET}`).toString(\"base64\")}`,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`Token exchange failed: ${res.status} ${txt}`);\n    }\n    return res.json();\n}\nasync function refreshAccessToken(refreshToken) {\n    const body = new URLSearchParams({\n        grant_type: \"refresh_token\",\n        refresh_token: refreshToken\n    });\n    const res = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Basic ${b64(`${CLIENT_ID}:${CLIENT_SECRET}`)}`,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`Refresh failed: ${res.status} ${txt}`);\n    }\n    return res.json();\n}\nasync function ensureAccessToken() {\n    let access = getCookie(COOKIE_ACCESS);\n    const refresh = getRefreshToken();\n    if (!refresh) return null;\n    if (!access || tokenExpired()) {\n        const refreshed = await refreshAccessToken(refresh);\n        access = refreshed.access_token;\n    }\n    return access || null;\n}\nasync function getNowPlaying(accessToken) {\n    const res = await fetch(\"https://api.spotify.com/v1/me/player/currently-playing\", {\n        headers: {\n            Authorization: `Bearer ${accessToken}`\n        },\n        cache: \"no-store\"\n    });\n    if (res.status === 204) return {\n        playing: false\n    };\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`now playing failed: ${res.status} ${txt}`);\n    }\n    const json = await res.json();\n    return {\n        playing: json.is_playing,\n        title: json.item?.name,\n        artist: json.item?.artists?.map((a)=>a.name).join(\", \"),\n        album: json.item?.album?.name,\n        url: json.item?.external_urls?.spotify\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUVGLElBQUksQ0FBQztJQUM1RDtJQUVBLE1BQU1HLE9BQU8sTUFBTXJDLElBQUlxQyxJQUFJO0lBQzNCLE9BQU87UUFDTFMsU0FBU1QsS0FBS1UsVUFBVTtRQUN4QkMsT0FBT1gsS0FBS1ksSUFBSSxFQUFFL0Q7UUFDbEJnRSxRQUFRYixLQUFLWSxJQUFJLEVBQUVFLFNBQVNDLElBQUksQ0FBQ0MsSUFBV0EsRUFBRW5FLElBQUksRUFBRU0sS0FBSztRQUN6RDhELE9BQU9qQixLQUFLWSxJQUFJLEVBQUVLLE9BQU9wRTtRQUN6QlMsS0FBSzBDLEtBQUtZLElBQUksRUFBRU0sZUFBZUM7SUFDakM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FzaC1wb3J0Zm9saW8tZnVsbC8uL2xpYi9zcG90aWZ5LnRzPzM5ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbmNvbnN0IENMSUVOVF9JRCA9IHByb2Nlc3MuZW52LlNQT1RJRllfQ0xJRU5UX0lEITtcbmNvbnN0IENMSUVOVF9TRUNSRVQgPSBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9TRUNSRVQhO1xuY29uc3QgRkFMTEJBQ0tfUkVESVJFQ1QgPSBwcm9jZXNzLmVudi5TUE9USUZZX1JFRElSRUNUX1VSSSB8fCAnJzsgLy8gZmFsbGJhY2sgb25seVxuY29uc3QgUkVESVJFQ1RfVVJJID0gcHJvY2Vzcy5lbnYuU1BPVElGWV9SRURJUkVDVF9VUkkhOyAvLyBtdXN0IG1hdGNoIG9uIFNwb3RpZnkgZGFzaGJvYXJkXG5jb25zdCBJU19QUk9EID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbmNvbnN0IENPT0tJRV9ET01BSU4gPSBwcm9jZXNzLmVudi5DT09LSUVfRE9NQUlOIHx8IHVuZGVmaW5lZDtcbmNvbnN0IFBSRUZJWCA9IHByb2Nlc3MuZW52LlNQT1RJRllfQ09PS0lFX1BSRUZJWCA/PyAnc3AnO1xuXG5leHBvcnQgY29uc3QgQ09PS0lFX1JFRlJFU0ggPSBgJHtQUkVGSVh9X3JlZnJlc2hgO1xuZXhwb3J0IGNvbnN0IENPT0tJRV9BQ0NFU1MgID0gYCR7UFJFRklYfV9hY2Nlc3NgO1xuZXhwb3J0IGNvbnN0IENPT0tJRV9FWFAgICAgID0gYCR7UFJFRklYfV9leHBgO1xuXG5mdW5jdGlvbiBiNjQoeDogc3RyaW5nKSB7XG4gIHJldHVybiBCdWZmZXIuZnJvbSh4KS50b1N0cmluZygnYmFzZTY0Jyk7XG59XG5cbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGNvb2tpZXMoKS5nZXQobmFtZSk/LnZhbHVlO1xufVxuXG4vKiogQnVpbGQgdGhlIHVzZXIgY29uc2VudCBVUkwgKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEF1dGhvcml6ZVVSTChyZWRpcmVjdFVyaT86IHN0cmluZykge1xuICBjb25zdCBzY29wZXMgPSBbXG4gICAgJ3VzZXItcmVhZC1jdXJyZW50bHktcGxheWluZycsXG4gICAgJ3VzZXItcmVhZC1wbGF5YmFjay1zdGF0ZScsXG4gIF0uam9pbignICcpO1xuXG4gIGNvbnN0IGZpbmFsUmVkaXJlY3QgPSByZWRpcmVjdFVyaSB8fCBGQUxMQkFDS19SRURJUkVDVDtcbiAgaWYgKCFmaW5hbFJlZGlyZWN0KSB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgcmVkaXJlY3QgVVJJJyk7XG5cbiAgY29uc3QgdXJsID0gbmV3IFVSTCgnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hdXRob3JpemUnKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9pZCcsIENMSUVOVF9JRCk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyZXNwb25zZV90eXBlJywgJ2NvZGUnKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3JlZGlyZWN0X3VyaScsIGZpbmFsUmVkaXJlY3QpO1xuICB1cmwuc2VhcmNoUGFyYW1zLnNldCgnc2NvcGUnLCBzY29wZXMpO1xuICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG59XG4vKiogU2V0IGNvb2tpZXMgb24gdGhlICpyZXNwb25zZSogd2UgcmV0dXJuIChzYWZlIGZvciBwcm9kKSAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VG9rZW5zVG9SZXNwb25zZShcbiAgcmVzOiBOZXh0UmVzcG9uc2UsXG4gIHtcbiAgICBhY2Nlc3NfdG9rZW4sXG4gICAgcmVmcmVzaF90b2tlbixcbiAgICBleHBpcmVzX2luLFxuICB9OiB7IGFjY2Vzc190b2tlbjogc3RyaW5nOyByZWZyZXNoX3Rva2VuPzogc3RyaW5nOyBleHBpcmVzX2luOiBudW1iZXIgfVxuKSB7XG4gIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApO1xuICBjb25zdCBleHAgPSBub3cgKyBNYXRoLm1heCgxLCBNYXRoLmZsb29yKGV4cGlyZXNfaW4gKiAwLjkpKTtcblxuICBjb25zdCBiYXNlID0ge1xuICAgIGh0dHBPbmx5OiB0cnVlIGFzIGNvbnN0LFxuICAgIHNhbWVTaXRlOiAnbGF4JyBhcyBjb25zdCxcbiAgICBwYXRoOiAnLycsXG4gICAgc2VjdXJlOiBJU19QUk9ELFxuICAgIC4uLihDT09LSUVfRE9NQUlOID8geyBkb21haW46IENPT0tJRV9ET01BSU4gfSA6IHt9KSxcbiAgfTtcblxuICByZXMuY29va2llcy5zZXQoQ09PS0lFX0FDQ0VTUywgYWNjZXNzX3Rva2VuLCBiYXNlKTtcbiAgcmVzLmNvb2tpZXMuc2V0KENPT0tJRV9FWFAsIFN0cmluZyhleHApLCBiYXNlKTtcblxuICBpZiAocmVmcmVzaF90b2tlbikge1xuICAgIHJlcy5jb29raWVzLnNldChDT09LSUVfUkVGUkVTSCwgcmVmcmVzaF90b2tlbiwge1xuICAgICAgLi4uYmFzZSxcbiAgICAgIG1heEFnZTogNjAgKiA2MCAqIDI0ICogMzAsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVG9rZW5zKHJlczogTmV4dFJlc3BvbnNlKSB7XG4gIHJlcy5jb29raWVzLnNldChDT09LSUVfQUNDRVNTLCAnJywgeyBwYXRoOiAnLycsIG1heEFnZTogMCB9KTtcbiAgcmVzLmNvb2tpZXMuc2V0KENPT0tJRV9SRUZSRVNILCAnJywgeyBwYXRoOiAnLycsIG1heEFnZTogMCB9KTtcbiAgcmVzLmNvb2tpZXMuc2V0KENPT0tJRV9FWFAsICcnLCB7IHBhdGg6ICcvJywgbWF4QWdlOiAwIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkge1xuICByZXR1cm4gZ2V0Q29va2llKENPT0tJRV9SRUZSRVNIKSB8fCAnJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuRXhwaXJlZCgpIHtcbiAgY29uc3QgZXhwID0gTnVtYmVyKGdldENvb2tpZShDT09LSUVfRVhQKSB8fCAwKTtcbiAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gIHJldHVybiAhZXhwIHx8IG5vdyA+PSBleHA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGNoYW5nZUNvZGVGb3JUb2tlbnMoY29kZTogc3RyaW5nLCByZWRpcmVjdFVyaT86IHN0cmluZykge1xuICBjb25zdCBmaW5hbFJlZGlyZWN0ID0gcmVkaXJlY3RVcmkgfHwgRkFMTEJBQ0tfUkVESVJFQ1Q7XG4gIGlmICghZmluYWxSZWRpcmVjdCkgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIHJlZGlyZWN0IFVSSScpO1xuXG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcbiAgICBjb2RlLFxuICAgIHJlZGlyZWN0X3VyaTogZmluYWxSZWRpcmVjdCxcbiAgfSk7XG5cbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXBpL3Rva2VuJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIEF1dGhvcml6YXRpb246IGBCYXNpYyAke0J1ZmZlci5mcm9tKGAke0NMSUVOVF9JRH06JHtDTElFTlRfU0VDUkVUfWApLnRvU3RyaW5nKCdiYXNlNjQnKX1gLFxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLFxuICAgIH0sXG4gICAgYm9keSxcbiAgICBjYWNoZTogJ25vLXN0b3JlJyxcbiAgfSk7XG5cbiAgaWYgKCFyZXMub2spIHtcbiAgICBjb25zdCB0eHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgIHRocm93IG5ldyBFcnJvcihgVG9rZW4gZXhjaGFuZ2UgZmFpbGVkOiAke3Jlcy5zdGF0dXN9ICR7dHh0fWApO1xuICB9XG4gIHJldHVybiByZXMuanNvbigpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2hUb2tlbjogc3RyaW5nKSB7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbicsXG4gICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuLFxuICB9KTtcblxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW4nLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YjY0KGAke0NMSUVOVF9JRH06JHtDTElFTlRfU0VDUkVUfWApfWAsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgfSxcbiAgICBib2R5LFxuICAgIGNhY2hlOiAnbm8tc3RvcmUnLFxuICB9KTtcblxuICBpZiAoIXJlcy5vaykge1xuICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBSZWZyZXNoIGZhaWxlZDogJHtyZXMuc3RhdHVzfSAke3R4dH1gKTtcbiAgfVxuICByZXR1cm4gcmVzLmpzb24oKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUFjY2Vzc1Rva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICBsZXQgYWNjZXNzID0gZ2V0Q29va2llKENPT0tJRV9BQ0NFU1MpO1xuICBjb25zdCByZWZyZXNoID0gZ2V0UmVmcmVzaFRva2VuKCk7XG4gIGlmICghcmVmcmVzaCkgcmV0dXJuIG51bGw7XG5cbiAgaWYgKCFhY2Nlc3MgfHwgdG9rZW5FeHBpcmVkKCkpIHtcbiAgICBjb25zdCByZWZyZXNoZWQgPSBhd2FpdCByZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaCk7XG4gICAgYWNjZXNzID0gcmVmcmVzaGVkLmFjY2Vzc190b2tlbjtcbiAgfVxuICByZXR1cm4gYWNjZXNzIHx8IG51bGw7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb3dQbGF5aW5nKGFjY2Vzc1Rva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL21lL3BsYXllci9jdXJyZW50bHktcGxheWluZycsIHtcbiAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0sXG4gICAgY2FjaGU6ICduby1zdG9yZScsXG4gIH0pO1xuXG4gIGlmIChyZXMuc3RhdHVzID09PSAyMDQpIHJldHVybiB7IHBsYXlpbmc6IGZhbHNlIH07XG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYG5vdyBwbGF5aW5nIGZhaWxlZDogJHtyZXMuc3RhdHVzfSAke3R4dH1gKTtcbiAgfVxuXG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xuICByZXR1cm4ge1xuICAgIHBsYXlpbmc6IGpzb24uaXNfcGxheWluZyxcbiAgICB0aXRsZToganNvbi5pdGVtPy5uYW1lLFxuICAgIGFydGlzdDoganNvbi5pdGVtPy5hcnRpc3RzPy5tYXAoKGE6IGFueSkgPT4gYS5uYW1lKS5qb2luKCcsICcpLFxuICAgIGFsYnVtOiBqc29uLml0ZW0/LmFsYnVtPy5uYW1lLFxuICAgIHVybDoganNvbi5pdGVtPy5leHRlcm5hbF91cmxzPy5zcG90aWZ5LFxuICB9O1xufVxuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJDTElFTlRfSUQiLCJwcm9jZXNzIiwiZW52IiwiU1BPVElGWV9DTElFTlRfSUQiLCJDTElFTlRfU0VDUkVUIiwiU1BPVElGWV9DTElFTlRfU0VDUkVUIiwiRkFMTEJBQ0tfUkVESVJFQ1QiLCJTUE9USUZZX1JFRElSRUNUX1VSSSIsIlJFRElSRUNUX1VSSSIsIklTX1BST0QiLCJDT09LSUVfRE9NQUlOIiwidW5kZWZpbmVkIiwiUFJFRklYIiwiU1BPVElGWV9DT09LSUVfUFJFRklYIiwiQ09PS0lFX1JFRlJFU0giLCJDT09LSUVfQUNDRVNTIiwiQ09PS0lFX0VYUCIsImI2NCIsIngiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJnZXRDb29raWUiLCJuYW1lIiwiZ2V0IiwidmFsdWUiLCJidWlsZEF1dGhvcml6ZVVSTCIsInJlZGlyZWN0VXJpIiwic2NvcGVzIiwiam9pbiIsImZpbmFsUmVkaXJlY3QiLCJFcnJvciIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsImFwcGx5VG9rZW5zVG9SZXNwb25zZSIsInJlcyIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVzX2luIiwibm93IiwiTWF0aCIsImZsb29yIiwiRGF0ZSIsImV4cCIsIm1heCIsImJhc2UiLCJodHRwT25seSIsInNhbWVTaXRlIiwicGF0aCIsInNlY3VyZSIsImRvbWFpbiIsIlN0cmluZyIsIm1heEFnZSIsImNsZWFyVG9rZW5zIiwiZ2V0UmVmcmVzaFRva2VuIiwidG9rZW5FeHBpcmVkIiwiTnVtYmVyIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW5zIiwiY29kZSIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJncmFudF90eXBlIiwicmVkaXJlY3RfdXJpIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNhY2hlIiwib2siLCJ0eHQiLCJ0ZXh0Iiwic3RhdHVzIiwianNvbiIsInJlZnJlc2hBY2Nlc3NUb2tlbiIsInJlZnJlc2hUb2tlbiIsImVuc3VyZUFjY2Vzc1Rva2VuIiwiYWNjZXNzIiwicmVmcmVzaCIsInJlZnJlc2hlZCIsImdldE5vd1BsYXlpbmciLCJhY2Nlc3NUb2tlbiIsInBsYXlpbmciLCJpc19wbGF5aW5nIiwidGl0bGUiLCJpdGVtIiwiYXJ0aXN0IiwiYXJ0aXN0cyIsIm1hcCIsImEiLCJhbGJ1bSIsImV4dGVybmFsX3VybHMiLCJzcG90aWZ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/spotify.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();