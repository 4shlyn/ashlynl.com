"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/spotify/nowplaying/route";
exports.ids = ["app/api/spotify/nowplaying/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ashlyn_Downloads_ash_portfolio_full_app_api_spotify_nowplaying_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/spotify/nowplaying/route.ts */ \"(rsc)/./app/api/spotify/nowplaying/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/spotify/nowplaying/route\",\n        pathname: \"/api/spotify/nowplaying\",\n        filename: \"route\",\n        bundlePath: \"app/api/spotify/nowplaying/route\"\n    },\n    resolvedPagePath: \"/Users/ashlyn/Downloads/ash-portfolio-full/app/api/spotify/nowplaying/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ashlyn_Downloads_ash_portfolio_full_app_api_spotify_nowplaying_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/spotify/nowplaying/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzcG90aWZ5JTJGbm93cGxheWluZyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3BvdGlmeSUyRm5vd3BsYXlpbmclMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzcG90aWZ5JTJGbm93cGxheWluZyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmFzaGx5biUyRkRvd25sb2FkcyUyRmFzaC1wb3J0Zm9saW8tZnVsbCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZhc2hseW4lMkZEb3dubG9hZHMlMkZhc2gtcG9ydGZvbGlvLWZ1bGwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXNoLXBvcnRmb2xpby1mdWxsLz9hYTkxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9hc2hseW4vRG93bmxvYWRzL2FzaC1wb3J0Zm9saW8tZnVsbC9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3BvdGlmeS9ub3dwbGF5aW5nL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3BvdGlmeS9ub3dwbGF5aW5nXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zcG90aWZ5L25vd3BsYXlpbmcvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvYXNobHluL0Rvd25sb2Fkcy9hc2gtcG9ydGZvbGlvLWZ1bGwvYXBwL2FwaS9zcG90aWZ5L25vd3BsYXlpbmcvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/spotify/nowplaying/route.ts":
/*!*********************************************!*\
  !*** ./app/api/spotify/nowplaying/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_spotify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/spotify */ \"(rsc)/./lib/spotify.ts\");\n\n\nasync function GET() {\n    try {\n        const token = await (0,_lib_spotify__WEBPACK_IMPORTED_MODULE_1__.ensureAccessToken)();\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                playing: false,\n                error: \"not_authed\"\n            }, {\n                status: 200\n            });\n        }\n        const data = await (0,_lib_spotify__WEBPACK_IMPORTED_MODULE_1__.getNowPlaying)(token);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data, {\n            status: 200\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: String(e?.message ?? e)\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBMkM7QUFDc0I7QUFFMUQsZUFBZUc7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLFFBQVEsTUFBTUgsK0RBQWlCQTtRQUNyQyxJQUFJLENBQUNHLE9BQU87WUFDVixPQUFPSixxREFBWUEsQ0FBQ0ssSUFBSSxDQUFDO2dCQUFFQyxTQUFTO2dCQUFPQyxPQUFPO1lBQWEsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2xGO1FBQ0EsTUFBTUMsT0FBTyxNQUFNUCwyREFBYUEsQ0FBQ0U7UUFDakMsT0FBT0oscURBQVlBLENBQUNLLElBQUksQ0FBQ0ksTUFBTTtZQUFFRCxRQUFRO1FBQUk7SUFDL0MsRUFBRSxPQUFPRSxHQUFRO1FBQ2YsT0FBT1YscURBQVlBLENBQUNLLElBQUksQ0FBQztZQUFFRSxPQUFPSSxPQUFPRCxHQUFHRSxXQUFXRjtRQUFHLEdBQUc7WUFBRUYsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hc2gtcG9ydGZvbGlvLWZ1bGwvLi9hcHAvYXBpL3Nwb3RpZnkvbm93cGxheWluZy9yb3V0ZS50cz9iMDExIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGVuc3VyZUFjY2Vzc1Rva2VuLCBnZXROb3dQbGF5aW5nIH0gZnJvbSAnQC9saWIvc3BvdGlmeSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBlbnN1cmVBY2Nlc3NUb2tlbigpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHBsYXlpbmc6IGZhbHNlLCBlcnJvcjogJ25vdF9hdXRoZWQnIH0sIHsgc3RhdHVzOiAyMDAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXROb3dQbGF5aW5nKHRva2VuKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZGF0YSwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFN0cmluZyhlPy5tZXNzYWdlID8/IGUpIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJlbnN1cmVBY2Nlc3NUb2tlbiIsImdldE5vd1BsYXlpbmciLCJHRVQiLCJ0b2tlbiIsImpzb24iLCJwbGF5aW5nIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiZSIsIlN0cmluZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/spotify/nowplaying/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/spotify.ts":
/*!************************!*\
  !*** ./lib/spotify.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SCOPES: () => (/* binding */ SCOPES),\n/* harmony export */   clearTokens: () => (/* binding */ clearTokens),\n/* harmony export */   ensureAccessToken: () => (/* binding */ ensureAccessToken),\n/* harmony export */   exchangeCodeForTokens: () => (/* binding */ exchangeCodeForTokens),\n/* harmony export */   getNowPlaying: () => (/* binding */ getNowPlaying),\n/* harmony export */   getRefreshToken: () => (/* binding */ getRefreshToken),\n/* harmony export */   refreshAccessToken: () => (/* binding */ refreshAccessToken),\n/* harmony export */   setTokens: () => (/* binding */ setTokens),\n/* harmony export */   tokenExpired: () => (/* binding */ tokenExpired)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n// lib/spotify.ts\n\nconst CLIENT_ID = process.env.SPOTIFY_CLIENT_ID;\nconst CLIENT_SECRET = process.env.SPOTIFY_CLIENT_SECRET;\nconst REDIRECT_URI = process.env.SPOTIFY_REDIRECT_URI;\nconst PREFIX = process.env.SPOTIFY_COOKIE_PREFIX ?? \"sp\";\nconst COOKIE_REFRESH = `${PREFIX}_refresh`;\nconst COOKIE_ACCESS = `${PREFIX}_access`;\nconst COOKIE_EXP = `${PREFIX}_exp`; // epoch seconds\nfunction b64(x) {\n    return Buffer.from(x).toString(\"base64\");\n}\nfunction setTokens({ access_token, refresh_token, expires_in }) {\n    const c = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    const now = Math.floor(Date.now() / 1000);\n    const exp = now + Math.max(1, Math.floor(expires_in * 0.9)); // renew a little early\n    const secure = \"development\" === \"production\";\n    c.set(COOKIE_ACCESS, access_token, {\n        httpOnly: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        secure\n    });\n    c.set(COOKIE_EXP, String(exp), {\n        httpOnly: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        secure\n    });\n    if (refresh_token) {\n        c.set(COOKIE_REFRESH, refresh_token, {\n            httpOnly: true,\n            sameSite: \"lax\",\n            path: \"/\",\n            secure,\n            maxAge: 60 * 60 * 24 * 30\n        });\n    }\n}\nfunction clearTokens() {\n    const c = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    c.delete(COOKIE_ACCESS);\n    c.delete(COOKIE_REFRESH);\n    c.delete(COOKIE_EXP);\n}\nfunction getCookie(name) {\n    return (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(name)?.value;\n}\nfunction getRefreshToken() {\n    return getCookie(COOKIE_REFRESH) || \"\";\n}\nfunction tokenExpired() {\n    const exp = Number(getCookie(COOKIE_EXP) || 0);\n    const now = Math.floor(Date.now() / 1000);\n    return !exp || now >= exp;\n}\nasync function exchangeCodeForTokens(code) {\n    const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: REDIRECT_URI\n    });\n    const res = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Basic ${b64(`${CLIENT_ID}:${CLIENT_SECRET}`)}`,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`Token exchange failed: ${res.status} ${txt}`);\n    }\n    return res.json();\n}\nasync function refreshAccessToken(refreshToken) {\n    const body = new URLSearchParams({\n        grant_type: \"refresh_token\",\n        refresh_token: refreshToken\n    });\n    const res = await fetch(\"https://accounts.spotify.com/api/token\", {\n        method: \"POST\",\n        headers: {\n            Authorization: `Basic ${b64(`${CLIENT_ID}:${CLIENT_SECRET}`)}`,\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body,\n        cache: \"no-store\"\n    });\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`Refresh failed: ${res.status} ${txt}`);\n    }\n    return res.json();\n}\nasync function ensureAccessToken() {\n    const c = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)();\n    let access = getCookie(COOKIE_ACCESS);\n    const refresh = getRefreshToken();\n    if (!refresh) return null;\n    if (!access || tokenExpired()) {\n        const refreshed = await refreshAccessToken(refresh);\n        setTokens({\n            access_token: refreshed.access_token,\n            // refresh_token may be omitted on refresh; keep the old one\n            expires_in: refreshed.expires_in ?? 3600\n        });\n        access = refreshed.access_token;\n    }\n    return access || null;\n}\nasync function getNowPlaying(accessToken) {\n    const res = await fetch(\"https://api.spotify.com/v1/me/player/currently-playing\", {\n        headers: {\n            Authorization: `Bearer ${accessToken}`\n        },\n        cache: \"no-store\"\n    });\n    if (res.status === 204) {\n        return {\n            playing: false\n        };\n    }\n    if (!res.ok) {\n        const txt = await res.text();\n        throw new Error(`now playing failed: ${res.status} ${txt}`);\n    }\n    const json = await res.json();\n    return {\n        playing: json.is_playing,\n        title: json.item?.name,\n        artist: json.item?.artists?.map((a)=>a.name).join(\", \"),\n        album: json.item?.album?.name,\n        url: json.item?.external_urls?.spotify\n    };\n}\nconst SCOPES = [\n    \"user-read-currently-playing\",\n    \"user-read-playback-state\"\n].join(\" \");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVksQ0FBQztRQUFDO1FBQ2xEZCxPQUFPO0lBQ1Q7SUFDQSxJQUFJTCxJQUFJVSxNQUFNLEtBQUssS0FBSztRQUN0QixPQUFPO1lBQUVVLFNBQVM7UUFBTTtJQUMxQjtJQUNBLElBQUksQ0FBQ3BCLElBQUlNLEVBQUUsRUFBRTtRQUNYLE1BQU1DLE1BQU0sTUFBTVAsSUFBSVEsSUFBSTtRQUMxQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRVQsSUFBSVUsTUFBTSxDQUFDLENBQUMsRUFBRUgsSUFBSSxDQUFDO0lBQzVEO0lBQ0EsTUFBTUksT0FBTyxNQUFNWCxJQUFJVyxJQUFJO0lBQzNCLE9BQU87UUFDTFMsU0FBU1QsS0FBS1UsVUFBVTtRQUN4QkMsT0FBT1gsS0FBS1ksSUFBSSxFQUFFbkM7UUFDbEJvQyxRQUFRYixLQUFLWSxJQUFJLEVBQUVFLFNBQVNDLElBQUksQ0FBQ0MsSUFBV0EsRUFBRXZDLElBQUksRUFBRXdDLEtBQUs7UUFDekRDLE9BQU9sQixLQUFLWSxJQUFJLEVBQUVNLE9BQU96QztRQUN6QjBDLEtBQUtuQixLQUFLWSxJQUFJLEVBQUVRLGVBQWVDO0lBQ2pDO0FBQ0Y7QUFFTyxNQUFNQyxTQUFTO0lBQ3BCO0lBQ0E7Q0FDRCxDQUFDTCxJQUFJLENBQUMsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL2FzaC1wb3J0Zm9saW8tZnVsbC8uL2xpYi9zcG90aWZ5LnRzPzM5ZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL3Nwb3RpZnkudHNcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG5jb25zdCBDTElFTlRfSUQgPSBwcm9jZXNzLmVudi5TUE9USUZZX0NMSUVOVF9JRCE7XG5jb25zdCBDTElFTlRfU0VDUkVUID0gcHJvY2Vzcy5lbnYuU1BPVElGWV9DTElFTlRfU0VDUkVUITtcbmNvbnN0IFJFRElSRUNUX1VSSSA9IHByb2Nlc3MuZW52LlNQT1RJRllfUkVESVJFQ1RfVVJJITtcbmNvbnN0IFBSRUZJWCA9IHByb2Nlc3MuZW52LlNQT1RJRllfQ09PS0lFX1BSRUZJWCA/PyAnc3AnO1xuXG5jb25zdCBDT09LSUVfUkVGUkVTSCA9IGAke1BSRUZJWH1fcmVmcmVzaGA7XG5jb25zdCBDT09LSUVfQUNDRVNTICA9IGAke1BSRUZJWH1fYWNjZXNzYDtcbmNvbnN0IENPT0tJRV9FWFAgICAgID0gYCR7UFJFRklYfV9leHBgOyAvLyBlcG9jaCBzZWNvbmRzXG5cbmZ1bmN0aW9uIGI2NCh4OiBzdHJpbmcpIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKHgpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRva2Vucyh7XG4gIGFjY2Vzc190b2tlbixcbiAgcmVmcmVzaF90b2tlbixcbiAgZXhwaXJlc19pbixcbn06IHtcbiAgYWNjZXNzX3Rva2VuOiBzdHJpbmc7XG4gIHJlZnJlc2hfdG9rZW4/OiBzdHJpbmc7XG4gIGV4cGlyZXNfaW46IG51bWJlcjtcbn0pIHtcbiAgY29uc3QgYyA9IGNvb2tpZXMoKTtcbiAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gIGNvbnN0IGV4cCA9IG5vdyArIE1hdGgubWF4KDEsIE1hdGguZmxvb3IoZXhwaXJlc19pbiAqIDAuOSkpOyAvLyByZW5ldyBhIGxpdHRsZSBlYXJseVxuY29uc3Qgc2VjdXJlID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcblxuYy5zZXQoQ09PS0lFX0FDQ0VTUywgYWNjZXNzX3Rva2VuLCB7XG4gIGh0dHBPbmx5OiB0cnVlLFxuICBzYW1lU2l0ZTogJ2xheCcsXG4gIHBhdGg6ICcvJyxcbiAgc2VjdXJlLFxufSk7XG5cbmMuc2V0KENPT0tJRV9FWFAsIFN0cmluZyhleHApLCB7XG4gIGh0dHBPbmx5OiB0cnVlLFxuICBzYW1lU2l0ZTogJ2xheCcsXG4gIHBhdGg6ICcvJyxcbiAgc2VjdXJlLFxufSk7XG5cbmlmIChyZWZyZXNoX3Rva2VuKSB7XG4gIGMuc2V0KENPT0tJRV9SRUZSRVNILCByZWZyZXNoX3Rva2VuLCB7XG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHBhdGg6ICcvJyxcbiAgICBzZWN1cmUsXG4gICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiAzMCxcbiAgfSk7XG59XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRva2VucygpIHtcbiAgY29uc3QgYyA9IGNvb2tpZXMoKTtcbiAgYy5kZWxldGUoQ09PS0lFX0FDQ0VTUyk7XG4gIGMuZGVsZXRlKENPT0tJRV9SRUZSRVNIKTtcbiAgYy5kZWxldGUoQ09PS0lFX0VYUCk7XG59XG5cbmZ1bmN0aW9uIGdldENvb2tpZShuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGNvb2tpZXMoKS5nZXQobmFtZSk/LnZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVmcmVzaFRva2VuKCkge1xuICByZXR1cm4gZ2V0Q29va2llKENPT0tJRV9SRUZSRVNIKSB8fCAnJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuRXhwaXJlZCgpIHtcbiAgY29uc3QgZXhwID0gTnVtYmVyKGdldENvb2tpZShDT09LSUVfRVhQKSB8fCAwKTtcbiAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCk7XG4gIHJldHVybiAhZXhwIHx8IG5vdyA+PSBleHA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGNoYW5nZUNvZGVGb3JUb2tlbnMoY29kZTogc3RyaW5nKSB7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICBncmFudF90eXBlOiAnYXV0aG9yaXphdGlvbl9jb2RlJyxcbiAgICBjb2RlLFxuICAgIHJlZGlyZWN0X3VyaTogUkVESVJFQ1RfVVJJLFxuICB9KTtcblxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW4nLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7YjY0KGAke0NMSUVOVF9JRH06JHtDTElFTlRfU0VDUkVUfWApfWAsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsXG4gICAgfSxcbiAgICBib2R5LFxuICAgIGNhY2hlOiAnbm8tc3RvcmUnLFxuICB9KTtcblxuICBpZiAoIXJlcy5vaykge1xuICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7cmVzLnN0YXR1c30gJHt0eHR9YCk7XG4gIH1cbiAgcmV0dXJuIHJlcy5qc29uKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWZyZXNoQWNjZXNzVG9rZW4ocmVmcmVzaFRva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgIGdyYW50X3R5cGU6ICdyZWZyZXNoX3Rva2VuJyxcbiAgICByZWZyZXNoX3Rva2VuOiByZWZyZXNoVG9rZW4sXG4gIH0pO1xuXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2FjY291bnRzLnNwb3RpZnkuY29tL2FwaS90b2tlbicsIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtiNjQoYCR7Q0xJRU5UX0lEfToke0NMSUVOVF9TRUNSRVR9YCl9YCxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICB9LFxuICAgIGJvZHksXG4gICAgY2FjaGU6ICduby1zdG9yZScsXG4gIH0pO1xuXG4gIGlmICghcmVzLm9rKSB7XG4gICAgY29uc3QgdHh0ID0gYXdhaXQgcmVzLnRleHQoKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFJlZnJlc2ggZmFpbGVkOiAke3Jlcy5zdGF0dXN9ICR7dHh0fWApO1xuICB9XG4gIHJldHVybiByZXMuanNvbigpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlQWNjZXNzVG9rZW4oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIGNvbnN0IGMgPSBjb29raWVzKCk7XG4gIGxldCBhY2Nlc3MgPSBnZXRDb29raWUoQ09PS0lFX0FDQ0VTUyk7XG4gIGNvbnN0IHJlZnJlc2ggPSBnZXRSZWZyZXNoVG9rZW4oKTtcblxuICBpZiAoIXJlZnJlc2gpIHJldHVybiBudWxsO1xuXG4gIGlmICghYWNjZXNzIHx8IHRva2VuRXhwaXJlZCgpKSB7XG4gICAgY29uc3QgcmVmcmVzaGVkID0gYXdhaXQgcmVmcmVzaEFjY2Vzc1Rva2VuKHJlZnJlc2gpO1xuICAgIHNldFRva2Vucyh7XG4gICAgICBhY2Nlc3NfdG9rZW46IHJlZnJlc2hlZC5hY2Nlc3NfdG9rZW4sXG4gICAgICAvLyByZWZyZXNoX3Rva2VuIG1heSBiZSBvbWl0dGVkIG9uIHJlZnJlc2g7IGtlZXAgdGhlIG9sZCBvbmVcbiAgICAgIGV4cGlyZXNfaW46IHJlZnJlc2hlZC5leHBpcmVzX2luID8/IDM2MDAsXG4gICAgfSk7XG4gICAgYWNjZXNzID0gcmVmcmVzaGVkLmFjY2Vzc190b2tlbjtcbiAgfVxuICByZXR1cm4gYWNjZXNzIHx8IG51bGw7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROb3dQbGF5aW5nKGFjY2Vzc1Rva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLnNwb3RpZnkuY29tL3YxL21lL3BsYXllci9jdXJyZW50bHktcGxheWluZycsIHtcbiAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gIH0sXG4gICAgY2FjaGU6ICduby1zdG9yZScsXG4gIH0pO1xuICBpZiAocmVzLnN0YXR1cyA9PT0gMjA0KSB7XG4gICAgcmV0dXJuIHsgcGxheWluZzogZmFsc2UgfTtcbiAgfVxuICBpZiAoIXJlcy5vaykge1xuICAgIGNvbnN0IHR4dCA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBub3cgcGxheWluZyBmYWlsZWQ6ICR7cmVzLnN0YXR1c30gJHt0eHR9YCk7XG4gIH1cbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XG4gIHJldHVybiB7XG4gICAgcGxheWluZzoganNvbi5pc19wbGF5aW5nLFxuICAgIHRpdGxlOiBqc29uLml0ZW0/Lm5hbWUsXG4gICAgYXJ0aXN0OiBqc29uLml0ZW0/LmFydGlzdHM/Lm1hcCgoYTogYW55KSA9PiBhLm5hbWUpLmpvaW4oJywgJyksXG4gICAgYWxidW06IGpzb24uaXRlbT8uYWxidW0/Lm5hbWUsXG4gICAgdXJsOiBqc29uLml0ZW0/LmV4dGVybmFsX3VybHM/LnNwb3RpZnksXG4gIH07XG59XG5cbmV4cG9ydCBjb25zdCBTQ09QRVMgPSBbXG4gICd1c2VyLXJlYWQtY3VycmVudGx5LXBsYXlpbmcnLFxuICAndXNlci1yZWFkLXBsYXliYWNrLXN0YXRlJyxcbl0uam9pbignICcpO1xuIl0sIm5hbWVzIjpbImNvb2tpZXMiLCJDTElFTlRfSUQiLCJwcm9jZXNzIiwiZW52IiwiU1BPVElGWV9DTElFTlRfSUQiLCJDTElFTlRfU0VDUkVUIiwiU1BPVElGWV9DTElFTlRfU0VDUkVUIiwiUkVESVJFQ1RfVVJJIiwiU1BPVElGWV9SRURJUkVDVF9VUkkiLCJQUkVGSVgiLCJTUE9USUZZX0NPT0tJRV9QUkVGSVgiLCJDT09LSUVfUkVGUkVTSCIsIkNPT0tJRV9BQ0NFU1MiLCJDT09LSUVfRVhQIiwiYjY0IiwieCIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsInNldFRva2VucyIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVzX2luIiwiYyIsIm5vdyIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJleHAiLCJtYXgiLCJzZWN1cmUiLCJzZXQiLCJodHRwT25seSIsInNhbWVTaXRlIiwicGF0aCIsIlN0cmluZyIsIm1heEFnZSIsImNsZWFyVG9rZW5zIiwiZGVsZXRlIiwiZ2V0Q29va2llIiwibmFtZSIsImdldCIsInZhbHVlIiwiZ2V0UmVmcmVzaFRva2VuIiwidG9rZW5FeHBpcmVkIiwiTnVtYmVyIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW5zIiwiY29kZSIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJncmFudF90eXBlIiwicmVkaXJlY3RfdXJpIiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNhY2hlIiwib2siLCJ0eHQiLCJ0ZXh0IiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwicmVmcmVzaEFjY2Vzc1Rva2VuIiwicmVmcmVzaFRva2VuIiwiZW5zdXJlQWNjZXNzVG9rZW4iLCJhY2Nlc3MiLCJyZWZyZXNoIiwicmVmcmVzaGVkIiwiZ2V0Tm93UGxheWluZyIsImFjY2Vzc1Rva2VuIiwicGxheWluZyIsImlzX3BsYXlpbmciLCJ0aXRsZSIsIml0ZW0iLCJhcnRpc3QiLCJhcnRpc3RzIiwibWFwIiwiYSIsImpvaW4iLCJhbGJ1bSIsInVybCIsImV4dGVybmFsX3VybHMiLCJzcG90aWZ5IiwiU0NPUEVTIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/spotify.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspotify%2Fnowplaying%2Froute&page=%2Fapi%2Fspotify%2Fnowplaying%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspotify%2Fnowplaying%2Froute.ts&appDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fashlyn%2FDownloads%2Fash-portfolio-full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();